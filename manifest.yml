---
# To apply this manifest: cf push --vars-file vars.yml
default_config: &defaults
  disk_quota: 512M
  timeout: 180
  services:
    - ((app_name))-db       # cf create-service aws-rds shared-mysql dashboard-db
    - ((app_name))-s3       # cf create-service s3 basic dashboard-s3
    - ((app_name))-secrets  # cf create-user-provided-service dashboard-secrets -p '{
               # "ENCRYPTION_KEY": "long-random-string"
               # }'

applications:
- name: ((app_name))
  <<: *defaults
  memory: 64M
  instances: ((instances))
  routes: ((routes))
  health-check-type: http
  health-check-http-endpoint: /healthcheck
  env:
    APP_DIR: /home/vcap/app
  processes:
  - type: web
    command: $HOME/.bp/bin/start
    disk_quota: 512M
    timeout: 10
